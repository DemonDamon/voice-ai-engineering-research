# ASR热词优化方案研究

## 论文信息
**标题**: H-PRM: A Pluggable Hotword Pre-Retrieval Module for Various Speech Recognition Systems

**作者**: Huangyu Dai, Lingtao Mao, Ben Chen, Zihan Wang, Zihan Liang, Ying Han, Chenyi Lei, Han Li

**机构**: Kuaishou Technology, Hangzhou, China; Zhejiang Gongshang University; Peking University; University of Pennsylvania; USTC

**发布时间**: 2025年8月22日

**arXiv ID**: 2508.18295v1

## 核心问题

### 现有热词定制的挑战
1. **大规模热词性能下降**：随着热词数量增加，识别率急剧下降
2. **传统模型局限**：现有模型在处理大规模热词时表现不佳
3. **Audio LLM集成困难**：将热词定制集成到音频大语言模型中存在挑战

### 客户反馈的问题
- 使用SenseVoice模型
- 添加热词后会降低识别英文准确率
- 中文识别准确率在95%左右，是否有优化空间

## H-PRM解决方案

### 核心创新：热词预检索模块（Hotword Pre-Retrieval Module）

#### 系统架构
H-PRM是一个**即插即用（Plug-and-Play）**的解决方案，可以轻松集成到：
1. **传统模型**：如SeACo-Paraformer
2. **Audio LLMs**：通过基于提示的方法

#### 工作原理

##### 1. 相似度计算
H-PRM使用二分类卷积神经网络（CNN）评估：
- 每个热词的连续发音
- 输入语音段
- 两者之间的相似度

##### 2. 处理流程
```
1. 从预定义的热词特征库中顺序提取热词的音素嵌入
2. 对每个热词，计算其音素嵌入与ASR结果音素嵌入之间的余弦相似度矩阵
3. CNN处理相似度矩阵，产生归一化的相似度分数
4. 根据相似度分数对所有热词进行排序
5. 选择得分最高的Top-N匹配作为模块输出
```

##### 3. 相似度矩阵特征
**高相似度情况**（图2a）：
- 当热词与语音段在音素上相似时
- 相似度矩阵显示明显的对角线亮线
- CNN倾向于输出高分

**低相似度情况**（图2b）：
- 当没有热词与语音段音素相似时
- 相似度矩阵呈现无序状态
- CNN输出低分

### 核心优势

#### 1. 显著提升热词后召回率（PRR）
- 在传统模型（SeACo-Paraformer）上显著增强PRR
- 在Audio LLMs上实现无缝热词定制

#### 2. 即插即用
- 无需修改原有ASR模型架构
- 可以作为独立模块集成
- 适配多种ASR系统

#### 3. 大规模热词支持
- 解决了热词数量增加导致识别率下降的问题
- 通过预检索机制筛选最相关的候选热词

#### 4. 性能验证
广泛测试验证H-PRM优于现有方法，为ASR中的热词定制提供了新方向。

## 针对客户问题的解决方案

### 问题1：热词降低英文准确率

#### 根本原因分析
- 热词库过大导致混淆
- 中英文热词混合导致语言模型偏向
- 热词注入机制不够精细

#### 解决方案

##### 方案A：采用H-PRM预检索机制
1. **实现热词预筛选**
   - 在ASR主流程前，使用H-PRM筛选最相关的Top-N热词
   - 减少热词候选集大小，降低混淆

2. **分语言热词库**
   - 建立中文热词库和英文热词库
   - 根据语音段的语言检测结果选择对应热词库
   - 避免跨语言干扰

##### 方案B：动态热词权重调整
1. **基于置信度的权重**
   - ASR输出置信度高时，降低热词权重
   - ASR输出置信度低时，提高热词权重

2. **上下文感知热词激活**
   - 根据对话上下文动态激活相关热词
   - 非相关热词临时禁用

##### 方案C：热词后处理优化
1. **二阶段识别**
   - 第一阶段：无热词的基础识别
   - 第二阶段：仅在低置信度区域应用热词修正

2. **热词验证机制**
   - 热词替换后进行声学验证
   - 确保替换后的音素序列与原始语音更匹配

### 问题2：中文识别准确率优化空间

#### 当前状态
- 人工朗读已有文本测试
- 排除标点进行CER计算
- 准确率约95%

#### 优化方向

##### 1. 模型层面
- **模型集成（Ensemble）**
  - 结合SenseVoice和Paraformer-online的优势
  - 使用投票或加权融合策略

- **领域自适应微调**
  - 收集业务相关的语音数据
  - 对SenseVoice进行少量微调
  - 针对性提升特定场景准确率

##### 2. 数据层面
- **数据增强**
  - 针对错误案例进行数据增强
  - 模拟不同口音、语速、背景噪音

- **困难样本挖掘**
  - 分析CER较高的5%样本
  - 针对性补充训练数据

##### 3. 后处理层面
- **语言模型融合**
  - 使用更强的中文语言模型进行后处理
  - 结合上下文信息修正识别错误

- **标点恢复优化**
  - 当前测试排除标点，但实际应用需要标点
  - 优化标点模型，避免标点错误影响CER

### 问题3：流式识别速度优化

#### 当前方案对比
| 模型 | RTF | 流式支持 | 首包延迟 | 准确率 |
|------|-----|---------|---------|--------|
| SenseVoice | 0.04 | ❌ | 400ms (10s音频) | 高 |
| Paraformer-online | - | ✅ | ~200ms | 较低 |

#### 优化方案

##### 方案A：SenseVoice流式改造
1. **Chunk-based推理**
   - 将长音频切分为固定长度的chunk
   - 每个chunk独立推理
   - 使用滑动窗口处理边界问题

2. **流式解码器**
   - 改造SenseVoice的解码器支持流式输出
   - 参考CosyVoice 2的chunk-aware设计

##### 方案B：混合策略
1. **VAD预切分 + SenseVoice**
   - 使用VAD将音频切分为语音段
   - 对每个语音段使用SenseVoice
   - 减少单次推理的音频长度

2. **双模型协同**
   - 实时场景：Paraformer-online提供快速反馈
   - 后台：SenseVoice进行高精度识别和修正
   - 根据应用场景选择使用哪个结果

##### 方案C：模型压缩与加速
1. **量化优化**
   - INT8量化SenseVoice
   - 在910B上使用CANN的量化工具

2. **模型蒸馏**
   - 使用SenseVoice作为教师模型
   - 蒸馏出更小、更快的学生模型
   - 保持准确率的同时提升速度

## 最新ASR模型推荐

### 2025年最佳开源ASR模型

#### 1. Canary Qwen 2.5B
- **排名**：Hugging Face Open ASR Leaderboard第一
- **优势**：最高英文准确率
- **适用场景**：英文为主的应用

#### 2. IBM Granite Speech 3.3 8B
- **优势**：多语言支持优秀
- **适用场景**：多语言混合场景

#### 3. Whisper Large V3
- **优势**：成熟稳定、社区支持广泛
- **适用场景**：通用场景

### 针对客户场景的建议

#### 短期方案（1-2个月）
1. 实现H-PRM热词预检索机制
2. 优化VAD参数和后处理流程
3. 建立中英文分离的热词库

#### 中期方案（3-6个月）
1. 对SenseVoice进行领域自适应微调
2. 开发混合识别策略（Paraformer-online + SenseVoice）
3. 实现模型集成提升准确率

#### 长期方案（6-12个月）
1. 评估和迁移到最新的SOTA模型（如Canary Qwen）
2. 自研流式高精度ASR模型
3. 建立完整的ASR质量监控和持续优化体系

## 参考文献
- Dai et al. (2025): H-PRM热词预检索模块
- Open ASR Leaderboard (2025): 最新ASR模型排名
- FunASR: ModelScope的ASR工具包
- SenseVoice: 阿里达摩院的多语言ASR模型
